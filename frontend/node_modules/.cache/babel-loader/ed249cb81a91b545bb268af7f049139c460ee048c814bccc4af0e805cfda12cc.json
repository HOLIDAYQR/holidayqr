{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{useParams}from\"react-router-dom\";import axios from\"axios\";import ReelUpload from\"./ReelUpload\";// Upload form\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ItineraryDetail=()=>{const{slug}=useParams();// slug is actually the ID\nconst[itinerary,setItinerary]=useState(null);const[reels,setReels]=useState([]);const apiBase=process.env.REACT_APP_API_BASE;useEffect(()=>{axios.get(\"\".concat(apiBase,\"itineraries/\").concat(slug,\"/\")).then(response=>{setItinerary(response.data);fetchReels(response.data.id);}).catch(error=>console.error(\"Error fetching itinerary:\",error));},[slug,apiBase]);const fetchReels=itineraryId=>{axios.get(\"\".concat(apiBase,\"reels/?itinerary=\").concat(itineraryId)).then(response=>setReels(response.data)).catch(error=>console.error(\"Error fetching reels:\",error));};if(!itinerary)return/*#__PURE__*/_jsx(\"p\",{className:\"p-6\",children:\"Loading itinerary details...\"});return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6 max-w-4xl mx-auto bg-white dark:bg-gray-800 rounded shadow-md\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-3xl font-bold mb-4\",children:itinerary.title}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-700 dark:text-gray-300\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Destination:\"}),\" \",itinerary.destination]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-700 dark:text-gray-300\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Duration:\"}),\" \",itinerary.duration_days,\" days\"]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-700 dark:text-gray-300\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Price:\"}),\" \\u20B9 \",itinerary.price]}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-2 text-gray-600 dark:text-gray-400\",children:itinerary.description}),itinerary.qr_code&&/*#__PURE__*/_jsx(\"img\",{src:\"\".concat(apiBase.replace(\"/api/\",\"\")).concat(itinerary.qr_code),alt:\"QR Code\",className:\"mt-6 w-36 h-auto\"}),/*#__PURE__*/_jsx(\"hr\",{className:\"my-6\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold mb-3\",children:\"Reels for this Itinerary\"}),/*#__PURE__*/_jsx(ReelUpload,{itineraryId:itinerary.id}),reels.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 mt-4\",children:\"No reels uploaded for this itinerary yet.\"}):/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4\",children:reels.map(reel=>/*#__PURE__*/_jsx(\"video\",{controls:true,className:\"w-full rounded shadow\",src:\"\".concat(apiBase.replace(\"/api/\",\"\")).concat(reel.video)},reel.id))})]});};export default ItineraryDetail;","map":{"version":3,"names":["React","useEffect","useState","useParams","axios","ReelUpload","jsx","_jsx","jsxs","_jsxs","ItineraryDetail","slug","itinerary","setItinerary","reels","setReels","apiBase","process","env","REACT_APP_API_BASE","get","concat","then","response","data","fetchReels","id","catch","error","console","itineraryId","className","children","title","destination","duration_days","price","description","qr_code","src","replace","alt","length","map","reel","controls","video"],"sources":["C:/Users/user/Desktop/HOLIDAYQR/frontend/src/components/ItineraryDetail.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport ReelUpload from \"./ReelUpload\"; // Upload form\r\n\r\nconst ItineraryDetail = () => {\r\n  const { slug } = useParams(); // slug is actually the ID\r\n  const [itinerary, setItinerary] = useState(null);\r\n  const [reels, setReels] = useState([]);\r\n  const apiBase = process.env.REACT_APP_API_BASE;\r\n\r\n  useEffect(() => {\r\n    axios\r\n      .get(`${apiBase}itineraries/${slug}/`)\r\n      .then((response) => {\r\n        setItinerary(response.data);\r\n        fetchReels(response.data.id);\r\n      })\r\n      .catch((error) => console.error(\"Error fetching itinerary:\", error));\r\n  }, [slug, apiBase]);\r\n\r\n  const fetchReels = (itineraryId) => {\r\n    axios\r\n      .get(`${apiBase}reels/?itinerary=${itineraryId}`)\r\n      .then((response) => setReels(response.data))\r\n      .catch((error) => console.error(\"Error fetching reels:\", error));\r\n  };\r\n\r\n  if (!itinerary) return <p className=\"p-6\">Loading itinerary details...</p>;\r\n\r\n  return (\r\n    <div className=\"p-6 max-w-4xl mx-auto bg-white dark:bg-gray-800 rounded shadow-md\">\r\n      <h2 className=\"text-3xl font-bold mb-4\">{itinerary.title}</h2>\r\n      <p className=\"text-gray-700 dark:text-gray-300\"><strong>Destination:</strong> {itinerary.destination}</p>\r\n      <p className=\"text-gray-700 dark:text-gray-300\"><strong>Duration:</strong> {itinerary.duration_days} days</p>\r\n      <p className=\"text-gray-700 dark:text-gray-300\"><strong>Price:</strong> â‚¹ {itinerary.price}</p>\r\n      <p className=\"mt-2 text-gray-600 dark:text-gray-400\">{itinerary.description}</p>\r\n\r\n      {itinerary.qr_code && (\r\n        <img\r\n          src={`${apiBase.replace(\"/api/\", \"\")}${itinerary.qr_code}`}\r\n          alt=\"QR Code\"\r\n          className=\"mt-6 w-36 h-auto\"\r\n        />\r\n      )}\r\n\r\n      <hr className=\"my-6\" />\r\n      <h3 className=\"text-xl font-semibold mb-3\">Reels for this Itinerary</h3>\r\n\r\n      <ReelUpload itineraryId={itinerary.id} />\r\n\r\n      {reels.length === 0 ? (\r\n        <p className=\"text-gray-500 mt-4\">No reels uploaded for this itinerary yet.</p>\r\n      ) : (\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4\">\r\n          {reels.map((reel) => (\r\n            <video\r\n              key={reel.id}\r\n              controls\r\n              className=\"w-full rounded shadow\"\r\n              src={`${apiBase.replace(\"/api/\", \"\")}${reel.video}`}\r\n            />\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ItineraryDetail;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}