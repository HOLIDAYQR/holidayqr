{"ast":null,"code":"import _objectSpread from\"C:/Users/user/Desktop/HOLIDAYQR/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState}from\"react\";import axios from\"axios\";import{useNavigate}from\"react-router-dom\";import{toast}from\"react-toastify\";import\"react-toastify/dist/ReactToastify.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ReelUpload=()=>{const navigate=useNavigate();const[itineraries,setItineraries]=useState([]);const[formData,setFormData]=useState({itinerary:\"\",video:null});const[reels,setReels]=useState([]);useEffect(()=>{const token=localStorage.getItem(\"auth_token\");if(!token){toast.error(\"‚ùå Please login to upload reels.\");navigate(\"/login\");return;}axios.get(\"http://127.0.0.1:8000/api/itineraries/\").then(res=>setItineraries(res.data)).catch(err=>console.error(\"Error fetching itineraries:\",err));axios.get(\"http://127.0.0.1:8000/api/reels/\").then(res=>setReels(res.data)).catch(err=>console.error(\"Error fetching reels:\",err));},[navigate]);const handleChange=e=>{if(e.target.name===\"video\"){setFormData(_objectSpread(_objectSpread({},formData),{},{video:e.target.files[0]}));}else{setFormData(_objectSpread(_objectSpread({},formData),{},{[e.target.name]:e.target.value}));}};const handleSubmit=e=>{e.preventDefault();const data=new FormData();data.append(\"itinerary\",formData.itinerary);data.append(\"video\",formData.video);axios.post(\"http://127.0.0.1:8000/api/reels/\",data,{headers:{\"Content-Type\":\"multipart/form-data\"}}).then(()=>{toast.success(\"üéâ Reel uploaded successfully!\");setFormData({itinerary:\"\",video:null});document.getElementById(\"reel-upload-form\").reset();axios.get(\"http://127.0.0.1:8000/api/reels/\").then(res=>setReels(res.data));}).catch(error=>{console.error(\"Upload error:\",error);toast.error(\"‚ùå Upload failed. Please try again.\");});};return/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-xl mx-auto bg-white dark:bg-gray-800 p-6 rounded shadow-md\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-semibold mb-4\",children:\"Upload Reel\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"space-y-4\",id:\"reel-upload-form\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"itinerary\",className:\"block font-medium mb-1\",children:\"Select Itinerary\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"itinerary\",value:formData.itinerary,onChange:handleChange,className:\"w-full border px-3 py-2 rounded\",required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"-- Choose --\"}),itineraries.map(item=>/*#__PURE__*/_jsxs(\"option\",{value:item.id,children:[item.title,\" (\",item.destination,\")\"]},item.id))]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"video\",className:\"block font-medium mb-1\",children:\"Upload Video\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",name:\"video\",accept:\"video/*\",onChange:handleChange,className:\"w-full\",required:true})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700\",children:\"Upload\"})]}),/*#__PURE__*/_jsx(\"hr\",{className:\"my-6\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold mb-2\",children:\"Recently Uploaded Reels\"}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 sm:grid-cols-2 gap-4\",children:reels.map(reel=>/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"video\",{controls:true,width:\"100%\",src:\"http://127.0.0.1:8000\".concat(reel.video)})},reel.id))})]});};export default ReelUpload;","map":{"version":3,"names":["React","useEffect","useState","axios","useNavigate","toast","jsx","_jsx","jsxs","_jsxs","ReelUpload","navigate","itineraries","setItineraries","formData","setFormData","itinerary","video","reels","setReels","token","localStorage","getItem","error","get","then","res","data","catch","err","console","handleChange","e","target","name","_objectSpread","files","value","handleSubmit","preventDefault","FormData","append","post","headers","success","document","getElementById","reset","className","children","onSubmit","id","htmlFor","onChange","required","map","item","title","destination","type","accept","reel","controls","width","src","concat"],"sources":["C:/Users/user/Desktop/HOLIDAYQR/frontend/src/components/ReelUpload.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { toast } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\n\r\n\r\nconst ReelUpload = () => {\r\n  const navigate = useNavigate();\r\n  const [itineraries, setItineraries] = useState([]);\r\n  const [formData, setFormData] = useState({ itinerary: \"\", video: null });\r\n  const [reels, setReels] = useState([]);\r\n\r\n  useEffect(() => {\r\n    const token = localStorage.getItem(\"auth_token\");\r\n    if (!token) {\r\n      toast.error(\"‚ùå Please login to upload reels.\");\r\n      navigate(\"/login\");\r\n      return;\r\n    }\r\n\r\n    axios.get(\"http://127.0.0.1:8000/api/itineraries/\")\r\n      .then((res) => setItineraries(res.data))\r\n      .catch((err) => console.error(\"Error fetching itineraries:\", err));\r\n\r\n    axios.get(\"http://127.0.0.1:8000/api/reels/\")\r\n      .then((res) => setReels(res.data))\r\n      .catch((err) => console.error(\"Error fetching reels:\", err));\r\n  }, [navigate]);\r\n\r\n  const handleChange = (e) => {\r\n    if (e.target.name === \"video\") {\r\n      setFormData({ ...formData, video: e.target.files[0] });\r\n    } else {\r\n      setFormData({ ...formData, [e.target.name]: e.target.value });\r\n    }\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n\r\n    const data = new FormData();\r\n    data.append(\"itinerary\", formData.itinerary);\r\n    data.append(\"video\", formData.video);\r\n\r\n    axios.post(\"http://127.0.0.1:8000/api/reels/\", data, {\r\n      headers: { \"Content-Type\": \"multipart/form-data\" },\r\n    })\r\n      .then(() => {\r\n        toast.success(\"üéâ Reel uploaded successfully!\");\r\n        setFormData({ itinerary: \"\", video: null });\r\n        document.getElementById(\"reel-upload-form\").reset();\r\n\r\n        axios.get(\"http://127.0.0.1:8000/api/reels/\")\r\n          .then((res) => setReels(res.data));\r\n      })\r\n      .catch((error) => {\r\n        console.error(\"Upload error:\", error);\r\n        toast.error(\"‚ùå Upload failed. Please try again.\");\r\n      });\r\n  };\r\n\r\n  return (\r\n    <div className=\"max-w-xl mx-auto bg-white dark:bg-gray-800 p-6 rounded shadow-md\">\r\n      <h2 className=\"text-2xl font-semibold mb-4\">Upload Reel</h2>\r\n      <form onSubmit={handleSubmit} className=\"space-y-4\" id=\"reel-upload-form\">\r\n        <div>\r\n          <label htmlFor=\"itinerary\" className=\"block font-medium mb-1\">Select Itinerary</label>\r\n          <select\r\n            name=\"itinerary\"\r\n            value={formData.itinerary}\r\n            onChange={handleChange}\r\n            className=\"w-full border px-3 py-2 rounded\"\r\n            required\r\n          >\r\n            <option value=\"\">-- Choose --</option>\r\n            {itineraries.map((item) => (\r\n              <option key={item.id} value={item.id}>\r\n                {item.title} ({item.destination})\r\n              </option>\r\n            ))}\r\n          </select>\r\n        </div>\r\n        <div>\r\n          <label htmlFor=\"video\" className=\"block font-medium mb-1\">Upload Video</label>\r\n          <input\r\n            type=\"file\"\r\n            name=\"video\"\r\n            accept=\"video/*\"\r\n            onChange={handleChange}\r\n            className=\"w-full\"\r\n            required\r\n          />\r\n        </div>\r\n        <button\r\n          type=\"submit\"\r\n          className=\"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700\"\r\n        >\r\n          Upload\r\n        </button>\r\n      </form>\r\n\r\n      <hr className=\"my-6\" />\r\n      <h3 className=\"text-xl font-semibold mb-2\">Recently Uploaded Reels</h3>\r\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\r\n        {reels.map((reel) => (\r\n          <div key={reel.id}>\r\n            <video controls width=\"100%\" src={`http://127.0.0.1:8000${reel.video}`} />\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ReelUpload;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}